<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Máquinas | Point</title>
        <link rel="stylesheet" href="css/styleDash.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>
    <body>
        <header>
            <nav id="menu">
                <a href="maquinas.html" class="logo">
                    <img src="../assets/imgs/Point.png">
                </a>
                <hr>
                <!-- <a href="alertas.html">
                    <img src="../assets/imgs/alfinete 1.png">
                    <span>Alertas</span>
                </a> -->
                <a href="funcionarios.html" class="img-nav">
                    <img src="../assets/imgs/user.png" >
                    <span>Funcionários</span>
                </a>
                <a href="maquinas.html" class="img-nav">
                    <img src="./assets/imgs/imac.png">
                    <span>Máquinas</span>
                </a>
                <a href="configuracoes.html" class="img-nav">
                    <img src="./assets/imgs/setting.png">
                    <span>Configurações</span>
                </a>
                <hr>
                <a href="../index.html" class="img-nav">
                    <img src="../assets/imgs/x.png">
                    <span>Sair</span>
                </a>
            </nav>
            <nav id="menu-mobile"><img src="assets/dash/bars.svg"></nav>
        </header>
        <main>
            <section class="top">
                <div class="top-esq">
                    <label for="">Ordenar por:</label>
                    <select id="">
                        <option value="">Estado de alerta</option>
                        <option value="">Nome da máquina</option>
                        <option value="">Nome do funcionário</option>
                    </select>
                </div>
                <div class="top-meio">
                    <input id="inp-pesquisar-maquina" type="search" placeholder="Pesquise por funcionário ou por máquina">
                </div>
                <div class="top-dir">
                    
                    <p class="nome"><span id="nomeGerente"></span></p>
                    <img src="../assets/dash/pessoa.jpeg">
                </div>
            </section>
            <section id="maquinas">
                <!-- <div class="box-maquina alerta">
                    <img src="../assets/dash/computer.png">
                    <h3>Manoel Ferreira</h3>
                    <p>UBUNTU 1345</p>
                    <div class="botoes">
                        <a href="tempo-real.html?idMaquina=1">Tempo real</a>
                        <a href="analise.html?idMaquina=1">Analisar</a>
                    </div>
                </div> -->
            </section>
        </main>
    </body>
</html>
<script>


    nomeGerente.innerHTML=sessionStorage.NOME_USUARIO;
    // TO DO: incluir máquinas com alertas, verificar se é computador ou servidor
    fetch(`/maquinas/listar`).then(function (res) {
            if (res.ok) {
                res.json().then(resposta => {
                    var lista = document.querySelector("#maquinas");
                    console.log(resposta);
                    for(let maquina = 0; maquina < resposta.length; maquina++){
                        lista.innerHTML += `<div class="box box-maquina">
                            <img src="../assets/dash/computer.png">
                            <h3>${resposta[maquina].nome}</h3>
                            <p>${resposta[maquina].nomeMaquina}</p>
                            <div class="botoes">
                                <a class="btn-link" href="tempo-real.html?idMaquina=${resposta[maquina].idMaquina}">Tempo real</a>
                                <a class="btn-link" href="analise.html?idMaquina=${resposta[maquina].idMaquina}">Analisar</a>
                            </div>
                        </div>`;
                    }
                });
            }
        });
</script>
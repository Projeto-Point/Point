<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Tempo Real | Point</title>
    <link rel="stylesheet" href="css/styleDash.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Advent+Pro:wght@100;200;300;400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <header>
        <nav id="menu">
            <a href="index.html" class="logo">
                <img src="assets/imgs/Point.png">
            </a>
            <hr>
            <a href="#">
                <img src="assets/imgs/alfinete 1.png">
                <span>Dashboard</span>
            </a>
            <a href="#">
                <img src="assets/imgs/alfinete 1.png">
                <span>Alertas</span>
            </a>
            <a href="#">
                <img src="assets/imgs/alfinete 1.png">
                <span>Funcionários</span>
            </a>
            <a href="#">
                <img src="assets/imgs/alfinete 1.png">
                <span>Máquinas</span>
            </a>
        </nav>
        <nav id="menu-mobile"><img src="assets/imgs/alfinete 1.png"></nav>
    </header>
    <main>
        <section class="top">
            <div class="top-esq">
                <p class="titulo">Olá, Agda Taniguchi</p>
                <p class="subtitulo">02/10/2022 - 13:56</p>
            </div>
            <div class="top-meio">
                <input id="inp-pesquisar-funcionario" type="search" placeholder="Pesquise o nome de um funcionário...">
            </div>
            <div class="top-dir">
                <button><img src="assets/dash/bell.png"></button>
                <p class="nome">Agda Taniguchi</p>
                <img src="assets/dash/pessoa.jpeg">
            </div>
        </section>
        <section class="dashboard">
            <div class="grafico" id="gfCpu">
                <h3>Processador</h3>
                <div> <canvas id="myChart" style="position: relative;"></canvas></div>
            </div>
            <div class="grafico" id="gfDisco">
                <h3>Disco</h3>
                <div><canvas id="myChart2" style="position: relative; width: 20vh"></canvas></div>
            </div>
            <div class="grafico" id="gfRam">
                <h3>Memória RAM</h3>
                <div>
                    <div><canvas id="myChart3" style="position: relative;"></canvas></div>
                </div>
            </div>
            <div class="tabela" id="tbProcessos">
                <h3>Aplicativos abertos</h3>
                <table>
                    <tr>
                        <td>Algo</td>
                        <td>Algo</td>
                        <td>Algo</td>
                        <td>Algo</td>
                        <td>Algo</td>
                    </tr>
                    <tr>
                        <td>Algo</td>
                        <td>Algo</td>
                        <td>Algo</td>
                        <td>Algo</td>
                        <td>Algo</td>
                    </tr>
                </table>
            </div>
            <div class="tabela" id="tbHistorico">
                <h3>Histórico</h3>
                <table>
                    <tr>
                        <td>Algo</td>
                        <td>Algo</td>
                        <td>Algo</td>
                        <td>Algo</td>
                        <td>Algo</td>
                    </tr>
                    <tr>
                        <td>Algo</td>
                        <td>Algo</td>
                        <td>Algo</td>
                        <td>Algo</td>
                        <td>Algo</td>
                    </tr>
                </table>
            </div>
            <div class="tabela" id="tbHorario">
                <h3>Últimos alertas</h3>
            </div>
            <div class="tabela" id="tbFuncionario">
                <h3>Sobre o funcionário</h3>
                <p>Nome:</p>
                <p>Cargo:</p>
                <p>E-mail:</p>
            </div>
        </section>
    </main>
</body>

</html>

<script>
    var cpuMedida = [];
    var disco = [];

    
    const labels = [
        '',
        '',
        '',
        '',
        '',
        '',
    ];
    const labels2 = [
        'Ocupado',
        'Livre',
    ];

    const labels3 = [
        '',
        '',
        '',
        '',
        '',
        '',
    ];

    const data = {
        labels: labels,
        datasets: [{
            //CPU
            label: 'CPU',
            data: Number(cpuMedida),
            fill: false,
            borderColor: 'rgb(75, 192, 192)',
            tension: 0.1
        }]
    };
    const data2 = {
        labels: labels2,
        datasets: [{
            // Armazenamento 
            label: 'Armazenamento',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: [24]
        }
        ]
    };

    const data3 = {
        labels: labels3,
        datasets: [{
            //RAM
            label: 'RAM',
            data: [80, 81, 56, 55, 40],
            fill: false,
            borderColor: 'rgb(75, 192, 192)',
            tension: 0.1
        }]
    };

    const config = {
        type: 'line',
        data: data,
        options: {
            plugins: {
                legend: {
                    display: false
                }
            }
        }
    };


    const config2 = {
        type: 'pie',
        data: data2,
        options: {
            plugins: {
                legend: {
                    display: false
                }
            },
            responsive: false,
        }
    };

    const config3 = {
        type: 'line',
        data: data3,
        options: {
            plugins: {
                legend: {
                    display: false
                }
            }
        }
    };
</script>

<script>
    const myChart = new Chart(
        document.getElementById('myChart'),
        config
    );

    const myChart2 = new Chart(
        document.getElementById('myChart2'),
        config2
    );

    const myChart3 = new Chart(
        document.getElementById('myChart3'),
        config3
    );
</script>

<script>


    function recuperarDados() {
        fetch(`/medidas/pegarRegistroCPU?idMaquina=1`).then(function (res) {
            if (res.ok) {
                res.json().then(CPU => {
                    console.log(CPU)

                    cpuMedida = CPU
                })
            }
        })

        fetch(`/medidas/pegarRegistroDISCO?idMaquina=1`).then(function (res) {
            if (res.ok) {
                res.json().then(DISCO => {
                    console.log(DISCO)
                    console.log(DISCO[1])
                })
            }
        })

        fetch(`/medidas/pegarRegistroRAM?idMaquina=1`).then(function (res) {
            if (res.ok) {
                res.json().then(RAM => {
                    console.log(RAM)
                    console.log(RAM[1])
                })
            }
        })

    }

    recuperarDados()
</script>